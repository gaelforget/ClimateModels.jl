var documenterSearchIndex = {"docs":
[{"location":"functionalities/#manual","page":"Manual","title":"User Guide","text":"","category":"section"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"Here we document key functionalities offered in ClimateModels.jl","category":"page"},{"location":"functionalities/#Climate-Model-Interface","page":"Manual","title":"Climate Model Interface","text":"","category":"section"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"The climate model interface is based on a data structure (ModelConfig) and a series of methods like setup and launch. The default assumption is that the model is either 1) a Julia package to be downloaded from a URL within setup using Pkg, and run within launch using Pkg.test or 2) a Julia function to be called with a ModelConfig argument. ","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"A key point is that everything can be customized to e.g. 1) use a custom workflow instead of Pkg.test or 2) use popular models previously written in Fortran or C just as simply. The latter typically involves calling a build method to compile the model between setup and launch.","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"Leveraging the interface in real world application essentially means :","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"Define a concrete type ModelConfig (optional).\nCustomize interface methods to best suit your chosen model.","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"At first, one can skip the type definition (#1 above) and may only want to customize setup and launch for #2 (see examples 1, 2, and 3).","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"However, the idea is that for routine use of e.g. a popular model the customized interface elements would be provided via a dedicated package (e.g. MITgcmTools.jl). These customized interfaces would thus be maintained independently by developers and users most familiar with each model.","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"This approach is illustrated in the general circulation model example that uses the customized interface elements provided by MITgcmTools.jl for MITgcm.","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"ModelConfig","category":"page"},{"location":"functionalities/#ClimateModels.ModelConfig","page":"Manual","title":"ClimateModels.ModelConfig","text":"struct ModelConfig <: AbstractModelConfig\n\nmodel :: Union{Function,String,Pkg.Types.PackageSpec} = \"anonymous\"\nconfiguration :: Union{Function,String} = \"anonymous\"\noptions :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()\ninputs :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()\noutputs :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()\nstatus :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()\nchannel :: Channel{Any} = Channel{Any}(10) \nfolder :: String = tempdir()\nID :: UUID = UUIDs.uuid4()\n\n\n\n\n\n","category":"type"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"setup\nbuild\ncompile\nclean\nlaunch\nmonitor","category":"page"},{"location":"functionalities/#ClimateModels.setup","page":"Manual","title":"ClimateModels.setup","text":"setup(x)\n\nDefaults to default_ClimateModelSetup(x). Can be expected to be  specialized for most concrete types of AbstractModelConfig\n\nusing ClimateModels\ntmp=ModelConfig(model=ClimateModels.RandomWalker)\nsetup(tmp)\n\nisa(tmp,AbstractModelConfig)\n\n# output\n\ntrue\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.build","page":"Manual","title":"ClimateModels.build","text":"build(x)\n\nDefaults to default_ClimateModelBuild(x). Can be expected to be  specialized for most concrete types of AbstractModelConfig\n\nusing ClimateModels, Pkg\ntmp0=PackageSpec(url=\"https://github.com/JuliaOcean/AirSeaFluxes.jl\")\ntmp=ModelConfig(model=tmp0,configuration=\"anonymous\")\nsetup(tmp)\nbuild(tmp)\n\nisa(tmp,AbstractModelConfig)\n\n# output\n\ntrue\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.compile","page":"Manual","title":"ClimateModels.compile","text":"compile(x)\n\nDefaults to default_ClimateModelBuild(x). Can be expected to be  specialized for most concrete types of AbstractModelConfig\n\nusing ClimateModels, Pkg\ntmp0=PackageSpec(url=\"https://github.com/JuliaOcean/AirSeaFluxes.jl\")\ntmp=ModelConfig(model=tmp0)\nsetup(tmp)\ncompile(tmp)\n\nisa(tmp,AbstractModelConfig)\n\n# output\n\ntrue\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.clean","page":"Manual","title":"ClimateModels.clean","text":"clean(x :: AbstractModelConfig)\n\nCancel any remaining task (x.channel) and clean the run directory (via rm)\n\ntmp=ModelConfig(model=ClimateModels.RandomWalker)\nsetup(tmp)\nclean(tmp)\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.launch","page":"Manual","title":"ClimateModels.launch","text":"launch(x)\n\nDefaults to default_ClimateModelLaunch(x) which consists in take!(x) for AbstractModelConfig. Can be expected to be specialized for most  concrete types of AbstractModelConfig\n\ntmp=ModelConfig(model=ClimateModels.RandomWalker)\nsetup(tmp)\nlaunch(tmp)\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.monitor","page":"Manual","title":"ClimateModels.monitor","text":"monitor(x)\n\nShow x.status[end] by default.\n\ntmp=ModelConfig(model=ClimateModels.RandomWalker)\nsetup(tmp)\nmonitor(tmp)\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#API-Reference","page":"Manual","title":"API Reference","text":"","category":"section"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"","category":"page"},{"location":"functionalities/#Git-Support","page":"Manual","title":"Git Support","text":"","category":"section"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"The setup method normally calls git_log_init to set up a temporary run folder with a git enabled subfolder called log. This allows for recording each workflow step, using functions listed here for example.","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"git_log_init\ngit_log_msg\ngit_log_fil\ngit_log_prm\ngit_log_show","category":"page"},{"location":"functionalities/#ClimateModels.git_log_init","page":"Manual","title":"ClimateModels.git_log_init","text":"git_log_init(x :: AbstractModelConfig)\n\nCreate log subfolder, initialize git, and commit initial README.md\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.git_log_msg","page":"Manual","title":"ClimateModels.git_log_msg","text":"git_log_msg(x :: AbstractModelConfig,msg,commit_msg)\n\nAdd message msg to the log/README.md file and git commit.\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.git_log_fil","page":"Manual","title":"ClimateModels.git_log_fil","text":"git_log_fil(x :: AbstractModelConfig,fil,commit_msg)\n\nCommit changes to file log/fil with message commit_msg. If log/fil is  unknown to git (i.e. commit errors out) then try adding log/fil first. \n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.git_log_prm","page":"Manual","title":"ClimateModels.git_log_prm","text":"git_log_prm(x :: AbstractModelConfig,msg,commit_msg)\n\nAdd files found in tracked_parameters/ (if any) to git log.\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#ClimateModels.git_log_show","page":"Manual","title":"ClimateModels.git_log_show","text":"git_log_show(x :: AbstractModelConfig)\n\nShow git log.\n\n\n\n\n\n","category":"function"},{"location":"functionalities/#Cloud-Support","page":"Manual","title":"Cloud Support","text":"","category":"section"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"There are various ways that model output gets archived, distributed, and retrieved from the internet. In some cases downloading data can be the most convenient approach. In others it can be more advantageous to compute in the cloud and only download final results for plotting (e.g. cmip).","category":"page"},{"location":"functionalities/","page":"Manual","title":"Manual","text":"cmip","category":"page"},{"location":"functionalities/#ClimateModels.cmip","page":"Manual","title":"ClimateModels.cmip","text":"cmip(institution_id,source_id,variable_id)\n\nAccess CMIP6 climate model archive (https://bit.ly/2WiWmoh) via AWS.jl and Zarr.jl and compute (1) time mean global map and (2) time evolving global mean.\n\nThis example was partly inspired by @rabernat 's https://bit.ly/2VRMgvl notebook\n\nusing ClimateModels\n(mm,gm,meta)=cmip()\nnm=meta[\"long_name\"]*\" in \"*meta[\"units\"]\n\nusing Plots\nheatmap(mm[\"lon\"], mm[\"lat\"], transpose(mm[\"m\"]),\n        title=nm*\" (time mean)\")\nplot(gm[\"t\"][1:12:end],gm[\"y\"][1:12:end],xlabel=\"time\",ylabel=nm,\n     title=meta[\"institution_id\"]*\" (global mean, month by month)\")\ndisplay.([plot!(gm[\"t\"][i:12:end],gm[\"y\"][i:12:end], leg = false) for i in 2:12])\n\n\n\n\n\n\n\n","category":"function"},{"location":"examples/#examples","page":"Guide ","title":"Example Guide","text":"","category":"section"},{"location":"examples/","page":"Guide ","title":"Guide ","text":"The next sections are examples which broadly fall into two categories.","category":"page"},{"location":"examples/#Workflows-That-Run-Models","page":"Guide ","title":"Workflows That Run Models","text":"","category":"section"},{"location":"examples/","page":"Guide ","title":"Guide ","text":"random walk model (0D)\nShallowWaters.jl model (2D)\nSPEEDY atmosphere model (3D)\nMITgcm general circulation model","category":"page"},{"location":"examples/#Workflows-Using-Remote-Files","page":"Guide ","title":"Workflows Using Remote Files","text":"","category":"section"},{"location":"examples/","page":"Guide ","title":"Guide ","text":"CMIP6 model output : access climate model output from cloud storage and compute temperature time series and global maps.","category":"page"},{"location":"examples/#examples-outline","page":"Guide ","title":"Outline Of The Examples","text":"","category":"section"},{"location":"examples/","page":"Guide ","title":"Guide ","text":"Pages = [\n    \"generated/defaults.md\",\n]\nDepth = 2","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"EditURL = \"https://github.com/gaelforget/ClimateModels.jl/blob/master/examples/defaults.jl\"","category":"page"},{"location":"generated/defaults/#Default-Behavior-(Julia-Package)","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"","category":"section"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"By default it is assumed that:","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"The model is a Julia package to be downloaded via git clone from the repository URL.\nThe cloned package's test/runtests.jl is then used to run the model.","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"But it should immediately be noted that anything in the ClimateModels.jl interface can be customized differently.","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"This will become clear in the other examples that largely differ in the specifics while using the same, uniform, interface.","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"using ClimateModels, Pkg","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"url=PackageSpec(url=\"https://github.com/JuliaOcean/AirSeaFluxes.jl\")\nMC=ModelConfig(model=url)","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"setup(MC)\nlaunch(MC)","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"","category":"page"},{"location":"generated/defaults/","page":"Default Behavior (Julia Package)","title":"Default Behavior (Julia Package)","text":"This page was generated using Literate.jl.","category":"page"},{"location":"#ClimateModels.jl","page":"Home","title":"ClimateModels.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package provides a uniform interface to climate models of varying complexity and completeness. Models that range from low dimensional to whole Earth System models can be run and/or analyzed via this framework. ","category":"page"},{"location":"","page":"Home","title":"Home","text":"It also supports e.g. cloud computing workflows that start from previous model output available over the internet. Version control, using git, is included to allow for workflow documentation and reproducibility.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Please look at Examples and Manual for more detail.","category":"page"},{"location":"","page":"Home","title":"Home","text":"note: Note\nThis package is still in early development stage. Breaking changes remain likely.","category":"page"},{"location":"#Package-Features","page":"Home","title":"Package Features","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Climate Model Interface\nTracked Worklow Framework\nCloud + On-Premise File Support","category":"page"},{"location":"#main-contents","page":"Home","title":"Table Of Contents","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages = [\n    \"functionalities.md\",\n    \"examples.md\",\n]\nDepth = 2","category":"page"}]
}
