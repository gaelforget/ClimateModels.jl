<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · ClimateModels.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ClimateModels.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Example-Workflows-That-Run-Models"><span>Example Workflows That Run Models</span></a></li><li><a class="tocitem" href="#Remote-Access-To-Model-Output"><span>Remote Access To Model Output</span></a></li><li><a class="tocitem" href="#Climate-Model-Interface"><span>Climate Model Interface</span></a></li><li><a class="tocitem" href="#API-Reference"><span>API Reference</span></a></li><li><a class="tocitem" href="#Git-Support"><span>Git Support</span></a></li><li><a class="tocitem" href="#Cloud-Support"><span>Cloud Support</span></a></li></ul></li><li><a class="tocitem" href="generated/defaults/">Default Behavior</a></li><li><a class="tocitem" href="generated/RandomWalker/">Random Walker</a></li><li><a class="tocitem" href="generated/ShallowWaters/">Shallow Waters</a></li><li><a class="tocitem" href="generated/MITgcm/">General Circulation Model</a></li><li><a class="tocitem" href="generated/CMIP6/">Cloud Computing Workflow</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gaelforget/ClimateModels.jl/blob/master/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ClimateModels.jl"><a class="docs-heading-anchor" href="#ClimateModels.jl">ClimateModels.jl</a><a id="ClimateModels.jl-1"></a><a class="docs-heading-anchor-permalink" href="#ClimateModels.jl" title="Permalink"></a></h1><p><em>Note: package in early development stage; breaking changes remain likely.</em></p><p>This package provides a uniform interface to climate models of varying complexity and completeness. Models that range from low dimensional to whole Earth System models can be run and/or analyzed via this framework. </p><p>It also supports e.g. cloud computing workflows that start from previous model output available over the internet. Version control, using <em>git</em>, is included to allow for workflow documentation and reproducibility.</p><h2 id="Example-Workflows-That-Run-Models"><a class="docs-heading-anchor" href="#Example-Workflows-That-Run-Models">Example Workflows That Run Models</a><a id="Example-Workflows-That-Run-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Example-Workflows-That-Run-Models" title="Permalink"></a></h2><ul><li>one stochastic path (0D)</li><li>a shallow water model (2D)</li><li>the MIT general circulation model (3D, Ocean, Atmosphere, etc)</li></ul><h2 id="Remote-Access-To-Model-Output"><a class="docs-heading-anchor" href="#Remote-Access-To-Model-Output">Remote Access To Model Output</a><a id="Remote-Access-To-Model-Output-1"></a><a class="docs-heading-anchor-permalink" href="#Remote-Access-To-Model-Output" title="Permalink"></a></h2><p>The initial example accesses CMIP6 model output from cloud storage, via AWS and Zarr, to compute temperature maps and time series.</p><h2 id="Climate-Model-Interface"><a class="docs-heading-anchor" href="#Climate-Model-Interface">Climate Model Interface</a><a id="Climate-Model-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Climate-Model-Interface" title="Permalink"></a></h2><p>The climate model interface is based on a data structure (<code>ModelConfig</code>) and a series of methods (incl., <code>setup</code> and <code>launch</code>). The defaults assume that the model is a <code>Julia</code> package to be downloaded from a URL (<code>setup</code>), and run via <code>Pkg.Test</code> (<code>launch</code>). But the key point is that everything can be customized to e.g. use popular models previously written in Fortran or C.</p><p>Leveraging the interface in real world application essentially means :</p><ol><li>Define a concrete type <code>ModelConfig</code> (optional).</li><li>Customize interface methods to best suit your chosen model.</li></ol><p>At first, one can skip the type definition (<code>#1</code> above) and may only want to customize <code>setup</code> and <code>launch</code> for <code>#2</code> (see 0D and 2D examples).</p><p>But for routine use of e.g. a popular model it is suggested that the customized interface elements be incorporated in a dedicated package maintained inpdependently by developers / users familiar with that model.</p><p>This approach is illustrated in the general circulation model example in these docs, which uses the customized interface elements provided by <a href="https://github.com/gaelforget/MITgcmTools.jl">MITgcmTools.jl</a> for <a href="https://mitgcm.readthedocs.io/en/latest/">MITgcm</a> .</p><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.ModelConfig" href="#ClimateModels.ModelConfig"><code>ClimateModels.ModelConfig</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct ModelConfig &lt;: AbstractModelConfig</code></pre><pre><code class="language-none">model :: Union{Function,String,Pkg.Types.PackageSpec} = &quot;anonymous&quot;
configuration :: Union{Function,String} = &quot;anonymous&quot;
options :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()
inputs :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()
outputs :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()
status :: OrderedDict{Any,Any} = OrderedDict{Any,Any}()
channel :: Channel{Any} = Channel{Any}(10) 
folder :: String = tempdir()
ID :: UUID = UUIDs.uuid4()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL6-L20">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.clean" href="#ClimateModels.clean"><code>ClimateModels.clean</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">clean(x :: AbstractModelConfig)</code></pre><p>Cancel any remaining task (x.channel) and clean the run directory (via rm)</p><pre><code class="language-none">tmp=ModelConfig(model=ClimateModels.RandomWalker)
setup(tmp)
clean(tmp)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL234-L244">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.setup" href="#ClimateModels.setup"><code>ClimateModels.setup</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">setup(x)</code></pre><p>Defaults to <code>default_ClimateModelSetup(x)</code>. Can be expected to be  specialized for most concrete types of <code>AbstractModelConfig</code></p><pre><code class="language-julia">using ClimateModels, Pkg
tmp=ModelConfig(model=ClimateModels.RandomWalker)
setup(tmp)

isa(tmp,AbstractModelConfig)

# output

true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL34-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.build" href="#ClimateModels.build"><code>ClimateModels.build</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">build(x)</code></pre><p>Defaults to <code>default_ClimateModelBuild(x)</code>. Can be expected to be  specialized for most concrete types of <code>AbstractModelConfig</code></p><pre><code class="language-julia">using ClimateModels, Pkg
tmp0=PackageSpec(url=&quot;https://github.com/JuliaOcean/AirSeaFluxes.jl&quot;)
tmp=ModelConfig(model=tmp0,configuration=&quot;anonymous&quot;)
setup(tmp)
build(tmp)

isa(tmp,AbstractModelConfig)

# output

true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL150-L169">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.compile" href="#ClimateModels.compile"><code>ClimateModels.compile</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">compile(x)</code></pre><p>Defaults to <code>default_ClimateModelBuild(x)</code>. Can be expected to be  specialized for most concrete types of <code>AbstractModelConfig</code></p><pre><code class="language-julia">using ClimateModels, Pkg
tmp0=PackageSpec(url=&quot;https://github.com/JuliaOcean/AirSeaFluxes.jl&quot;)
tmp=ModelConfig(model=tmp0)
setup(tmp)
compile(tmp)

isa(tmp,AbstractModelConfig)

# output

true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL172-L191">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.launch" href="#ClimateModels.launch"><code>ClimateModels.launch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">launch(x)</code></pre><p>Defaults to <code>default_ClimateModelLaunch(x)</code> which consists in <code>take!(x)</code> for <code>AbstractModelConfig</code>. Can be expected to be specialized for most  concrete types of <code>AbstractModelConfig</code></p><pre><code class="language-none">tmp=ModelConfig(model=ClimateModels.RandomWalker)
setup(tmp)
launch(tmp)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL215-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.monitor" href="#ClimateModels.monitor"><code>ClimateModels.monitor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">monitor(x)</code></pre><p>Show <code>x.status[end]</code> by default.</p><pre><code class="language-none">tmp=ModelConfig(model=ClimateModels.RandomWalker)
setup(tmp)
monitor(tmp)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL258-L268">source</a></section></article><h2 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h2><ul><li><a href="#ClimateModels.ModelConfig"><code>ClimateModels.ModelConfig</code></a></li><li><a href="#ClimateModels.build"><code>ClimateModels.build</code></a></li><li><a href="#ClimateModels.clean"><code>ClimateModels.clean</code></a></li><li><a href="#ClimateModels.cmip"><code>ClimateModels.cmip</code></a></li><li><a href="#ClimateModels.compile"><code>ClimateModels.compile</code></a></li><li><a href="#ClimateModels.git_log_fil"><code>ClimateModels.git_log_fil</code></a></li><li><a href="#ClimateModels.git_log_init"><code>ClimateModels.git_log_init</code></a></li><li><a href="#ClimateModels.git_log_msg"><code>ClimateModels.git_log_msg</code></a></li><li><a href="#ClimateModels.git_log_prm"><code>ClimateModels.git_log_prm</code></a></li><li><a href="#ClimateModels.git_log_show"><code>ClimateModels.git_log_show</code></a></li><li><a href="#ClimateModels.launch"><code>ClimateModels.launch</code></a></li><li><a href="#ClimateModels.monitor"><code>ClimateModels.monitor</code></a></li><li><a href="#ClimateModels.setup"><code>ClimateModels.setup</code></a></li></ul><h2 id="Git-Support"><a class="docs-heading-anchor" href="#Git-Support">Git Support</a><a id="Git-Support-1"></a><a class="docs-heading-anchor-permalink" href="#Git-Support" title="Permalink"></a></h2><p>The <code>setup</code> method normally calls <code>git_log_init</code> to set up a temporary run folder with a <code>git</code> enabled subfolder called <code>log</code>. This allows for recording a workflow steps e.g. through the other functions listed here.</p><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.git_log_init" href="#ClimateModels.git_log_init"><code>ClimateModels.git_log_init</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">git_log_init(x :: AbstractModelConfig)</code></pre><p>Create <code>log</code> subfolder, initialize git, and commit initial README.md</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL87-L91">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.git_log_msg" href="#ClimateModels.git_log_msg"><code>ClimateModels.git_log_msg</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">git_log_msg(x :: AbstractModelConfig,msg,commit_msg)</code></pre><p>Add message <code>msg</code> to the <code>log/README.md</code> file and git commit.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL376-L380">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.git_log_fil" href="#ClimateModels.git_log_fil"><code>ClimateModels.git_log_fil</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">git_log_fil(x :: AbstractModelConfig,fil,commit_msg)</code></pre><p>Commit changes to file <code>log/fil</code> with message <code>commit_msg</code>. If <code>log/fil</code> is  unknown to git (i.e. commit errors out) then try adding <code>log/fil</code> first. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL399-L404">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.git_log_prm" href="#ClimateModels.git_log_prm"><code>ClimateModels.git_log_prm</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">git_log_prm(x :: AbstractModelConfig,msg,commit_msg)</code></pre><p>Add files found in <code>tracked_parameters/</code> (if any) to git log.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL425-L429">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.git_log_show" href="#ClimateModels.git_log_show"><code>ClimateModels.git_log_show</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">git_log_show(x :: AbstractModelConfig)</code></pre><p>Show git log.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/interface.jl#LL465-L469">source</a></section></article><h2 id="Cloud-Support"><a class="docs-heading-anchor" href="#Cloud-Support">Cloud Support</a><a id="Cloud-Support-1"></a><a class="docs-heading-anchor-permalink" href="#Cloud-Support" title="Permalink"></a></h2><p>There are various ways that model output gets archived, distributed, and retrieved from the internet. In some cases downloading data can be the most convenient approach. In others it can be more advantageous to compute in the cloud and only download final results for plotting (e.g. <code>cmip</code>).</p><article class="docstring"><header><a class="docstring-binding" id="ClimateModels.cmip" href="#ClimateModels.cmip"><code>ClimateModels.cmip</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cmip(institution_id,source_id,variable_id)</code></pre><p>Access CMIP6 climate model archive (https://bit.ly/2WiWmoh) via <code>AWS.jl</code> and <code>Zarr.jl</code> and compute (1) time mean global map and (2) time evolving global mean.</p><p>This example was partly inspired by @rabernat &#39;s https://bit.ly/2VRMgvl notebook</p><pre><code class="language-none">using ClimateModels
(mm,gm,meta)=cmip()
nm=meta[&quot;long_name&quot;]*&quot; in &quot;*meta[&quot;units&quot;]

using Plots
heatmap(mm[&quot;lon&quot;], mm[&quot;lat&quot;], transpose(mm[&quot;m&quot;]),
        title=nm*&quot; (time mean)&quot;)
plot(gm[&quot;t&quot;][1:12:end],gm[&quot;y&quot;][1:12:end],xlabel=&quot;time&quot;,ylabel=nm,
     title=meta[&quot;institution_id&quot;]*&quot; (global mean, month by month)&quot;)
display.([plot!(gm[&quot;t&quot;][i:12:end],gm[&quot;y&quot;][i:12:end], leg = false) for i in 2:12])

</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/gaelforget/ClimateModels.jl/blob/c439210c16ded0dd4ce29f38c35586fd583ca266/src/access.jl#LL4-L27">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="generated/defaults/">Default Behavior »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 20 April 2021 20:39">Tuesday 20 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
